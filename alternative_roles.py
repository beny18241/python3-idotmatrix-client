#!/usr/bin/env python3
"""
Alternative roles for service account
Guide for adding roles when Calendar API User is not available
"""

def main():
    """Alternative roles guide"""
    
    print("üîß Alternative Service Account Roles")
    print("=" * 50)
    print()
    print("‚ùå ISSUE: 'Calendar API User' role not found")
    print("‚úÖ SOLUTION: Try these alternative roles")
    print()
    print("üìã ALTERNATIVE ROLES TO TRY:")
    print("=" * 30)
    print()
    print("üîß OPTION 1: Basic Roles")
    print("-" * 30)
    print("1. Go to: https://console.cloud.google.com/iam-admin/iam")
    print("2. Find your service account")
    print("3. Click the pencil icon to edit")
    print("4. Click 'Add Another Role'")
    print("5. Try these roles in order:")
    print("   ‚Ä¢ 'Basic'")
    print("   ‚Ä¢ 'Viewer'")
    print("   ‚Ä¢ 'Editor'")
    print("6. Click 'Save'")
    print("7. Wait 5-10 minutes for permissions to propagate")
    print()
    print("üîß OPTION 2: Service Account Roles")
    print("-" * 30)
    print("1. Go to: https://console.cloud.google.com/iam-admin/iam")
    print("2. Find your service account")
    print("3. Click the pencil icon to edit")
    print("4. Click 'Add Another Role'")
    print("5. Try these roles:")
    print("   ‚Ä¢ 'Service Account User'")
    print("   ‚Ä¢ 'Service Account Token Creator'")
    print("   ‚Ä¢ 'Service Account Key Admin'")
    print("6. Click 'Save'")
    print("7. Wait 5-10 minutes for permissions to propagate")
    print()
    print("üîß OPTION 3: Google Workspace Roles")
    print("-" * 30)
    print("1. Go to: https://console.cloud.google.com/iam-admin/iam")
    print("2. Find your service account")
    print("3. Click the pencil icon to edit")
    print("4. Click 'Add Another Role'")
    print("5. Try these roles:")
    print("   ‚Ä¢ 'Google Workspace Admin'")
    print("   ‚Ä¢ 'Google Workspace User'")
    print("   ‚Ä¢ 'Google Workspace Viewer'")
    print("6. Click 'Save'")
    print("7. Wait 5-10 minutes for permissions to propagate")
    print()
    print("üîß OPTION 4: Custom Roles")
    print("-" * 30)
    print("1. Go to: https://console.cloud.google.com/iam-admin/iam")
    print("2. Find your service account")
    print("3. Click the pencil icon to edit")
    print("4. Click 'Add Another Role'")
    print("5. Try these roles:")
    print("   ‚Ä¢ 'Custom'")
    print("   ‚Ä¢ 'Google API Client Library'")
    print("   ‚Ä¢ 'Google API Service Agent'")
    print("6. Click 'Save'")
    print("7. Wait 5-10 minutes for permissions to propagate")
    print()
    print("üîß OPTION 5: Project-Level Roles")
    print("-" * 30)
    print("1. Go to: https://console.cloud.google.com/iam-admin/iam")
    print("2. Find your service account")
    print("3. Click the pencil icon to edit")
    print("4. Click 'Add Another Role'")
    print("5. Try these roles:")
    print("   ‚Ä¢ 'Project Editor'")
    print("   ‚Ä¢ 'Project Viewer'")
    print("   ‚Ä¢ 'Project Owner'")
    print("6. Click 'Save'")
    print("7. Wait 5-10 minutes for permissions to propagate")
    print()
    print("üîß OPTION 6: API-Specific Roles")
    print("-" * 30)
    print("1. Go to: https://console.cloud.google.com/iam-admin/iam")
    print("2. Find your service account")
    print("3. Click the pencil icon to edit")
    print("4. Click 'Add Another Role'")
    print("5. Try these roles:")
    print("   ‚Ä¢ 'Google API Client Library'")
    print("   ‚Ä¢ 'Google API Service Agent'")
    print("   ‚Ä¢ 'Google API User'")
    print("6. Click 'Save'")
    print("7. Wait 5-10 minutes for permissions to propagate")
    print()
    print("üß™ TEST AFTER EACH ROLE:")
    print("-" * 30)
    print("1. SSH into your remote server")
    print("2. Navigate to your project directory")
    print("3. Run: python diagnose_calendar.py")
    print("4. If you see 'Found X accessible calendars', you're done!")
    print("5. If still 0 calendars, try the next role")
    print()
    print("üéØ QUICK LINKS:")
    print("-" * 20)
    print("‚Ä¢ IAM & Admin: https://console.cloud.google.com/iam-admin/iam")
    print("‚Ä¢ Google Calendar API: https://console.cloud.google.com/apis/library/calendar-json.googleapis.com")
    print("‚Ä¢ Calendar Settings: https://calendar.google.com/calendar/r/settings")
    print()
    print("üìß Service Account Email:")
    print("   idotmatrix-service-account@n8nwork-450415.iam.gserviceaccount.com")
    print()
    print("‚ö†Ô∏è  IMPORTANT:")
    print("-" * 20)
    print("‚Ä¢ Try roles in order (Basic first)")
    print("‚Ä¢ Wait 10-15 minutes after each role")
    print("‚Ä¢ Test with: python diagnose_calendar.py")
    print("‚Ä¢ If one role works, you're done!")
    print()
    print("‚úÖ Expected Result:")
    print("   'Found X accessible calendars'")
    print("   Then: python calendar_display_all_calendars.py tomorrow")

if __name__ == '__main__':
    main()
